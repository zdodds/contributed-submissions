#
# live demo
#

print("start to guess...")

guess = 41

while true:   # just like an if... except it repeats!
    print("not the right guess")

print("guessing done!")


l = [ 'cgu', 'cmc', 'pit', 'scr', 'pom', 'hmc' ]
print("len(l) is", len(l))     # just for fun, try max and min of this l:  we win! (why?!)


l = [1, 2, 40, 3 ]
print("max(l) is", max(l))
print("min(l) is", min(l))
print("sum(l) is", sum(l))


l = range(1,43)
print("l is", l)   # uh oh... it won't create the list unless we tell it to...


l = list(range(1,367))  # ask it to create the list values...
print("l is", l)  # aha!


print("max(l) is", max(l))    # ... up to but _not_ including the endpoint!


#
# gauss's number: adding from 1 to 100

l = range(1, 101)
total = sum(l) #sum all numbers
print("sum(l) is", total)




# single-character substitution:

def vwl_once(c):
  """ vwl_once returns 1 for a single vowel, 0 otherwise
  """
  if c in 'aeiou': return 1
  else: return 0

# two tests:
print("vwl_once('a') should be 1 <->", vwl_once('a'))
print("vwl_once('b') should be 0 <->", vwl_once('b'))


s = "claremont"
print("s is", s)
print()

lc = [ vwl_once(c) for c in s ]
print("lc is", lc)


s = "audio"
print("s is", s)
print()

lc = [ vwl_once(c) for c in s ]
print("lc is", lc)


#
# feel free to use this cell to check your vowel-patterns.
#      this example is a starting point.
#      you'll want to copy-paste-and-change it:
s = "audio"
lc = [ vwl_once(c) for c in s ]
print("lc is", lc)
#vowel-patterns are [0, 1, 0, 1, 0]
s = "hello"
lc = [vwl_once(c) for c in s]
print("s is", s)
print("lc is", lc)

#vowel-patterns is[0, 0, 0, 1, 0, 0]
s = "strong"
lc = [vwl_once(c) for c in s]
print("s is", s)
print("lc is", lc)

#vowel-patterns [1, 0, 1, 1, 0, 0, 1, 0]
s = "education"
lc = [vwl_once(c) for c in s]
print("s is", s)
print("lc is", lc)


#
# vwl_all using this technique
#

def vwl_all(s):
  """ returns the total # of vowels in s, a string
  """
  lc = [ vwl_once(c) for c in s ]
  total = sum(lc)  # add them all up!
  return total

# two tests:
print("vwl_all('claremont') should be 3 <->", vwl_all('claremont'))
print("vwl_all('caffeine') should be 4 <->", vwl_all('caffeine'))



# scrabble-scoring

def scrabble_one(c):
  """ returns the scrabble score of one character, c
  """
  c = c.lower()
  if c in 'aeilnorstu':   return 1
  elif c in 'dg':         return 2
  elif c in 'bcmp':       return 3
  elif c in 'fhvwy':      return 4
  elif c in 'k':          return 5
  elif c in 'jx':         return 8
  elif c in 'qz':         return 10
  else:                   return 0

# tests:
print("scrabble_one('q') should be 10 <->", scrabble_one('q'))
print("scrabble_one('!') should be 0 <->", scrabble_one('!'))
print("scrabble_one('u') should be 1 <->", scrabble_one('u'))


#
# scrabble_all using this technique
#

def scrabble_all(s):
  """ returns the total scrabble score of s
  """
  lc = [ scrabble_one(c) for c in s ]
  total = sum(lc)  # add them all up!
  return total


# two tests:
print("scrabble_all('zany sci ten quiz') should be 46 <->", scrabble_all('zany sci ten quiz'))
print("scrabble_all('claremont') should be 13 <->", scrabble_all('claremont'))
print("scrabble_all('abcdefghijklmnopqrstuvwxyz!') should be 87 <->", scrabble_all('abcdefghijklmnopqrstuvwxyz!'))


s = "python"
print("scrabble_all('python') should be 14 <->", scrabble_all(s))


# here are the two texts:

plankton = """i'm as evil as ever. i'll prove it
right now by stealing the krabby patty secret formula."""

patrick = """i can't hear you.
it's too dark in here."""


#
# raw scrabble comparison
#

print("plankton, total score:", scrabble_all(plankton))
print("patrick, total score:", scrabble_all(patrick))


#
# per-character ("average/expected") scrabble comparison
#

print("plankton, per-char score:", scrabble_all(plankton)/len(plankton))
print("patrick, per-char score:", scrabble_all(patrick)/len(patrick))



# let's see a "plain"  lc   (list comprehension)

[ 2*x for x in [0,1,2,3,4,5] ]

# it _should_ result in     [0, 2, 4, 6, 8, 10]



# let's see a few more  list comprehensions.  for sure, we can name them:

a  =  [ 10*x for x in [0,1,2,3,4,5] if x%2==0]   # notice the "if"! (there's no else...)
print(a)



b = [ y*21 for y in list(range(0,3)) ]    # remember what range does?
print(b)


c = [ s[1] for s in ["hi", "7cs!"] ]      # doesn't have to be numbers...
print(c)


a = [x**2 for x in range(10) if x % 2 == 0]
print("a is", a)



# let's try thinking about these...

"""
a = [ n+2 for n in   range(40,42) ]
b = [ 42 for z in [0,1,2] ]
c = [ z for z in [42,42] ]
d = [ s[::-2] for s in ['fungic','y!a!y!'] ]
l = [ [len(w),w] for w in  ['hi','ist'] ]
"""

# then, see if they work the way you predict...


#
# here, [1] create a function that scores punctuation as 1 and non-punctuation as 0, pun_one
#       [2] use the list-comprehension technique to create a punctuation-scoring function, pun_all

# use the above examples as a starting point!
def pun_one(c):
    """returns 1 if c is a punctuation mark, otherwise 0"""
    if c in ".,!?;:-'\"()[]{}":
        return 1
    else:
        return 0

# step 2: define pun_all using list comprehension
def pun_all(s):
    """returns total punctuation count in s"""
    lc = [pun_one(c) for c in s]  # apply pun_one on each character
    total = sum(lc)  # sum up all punctuation counts
    return total




# tests
print("pun_all(plankton) should be 4 <->", pun_all(plankton))
print("pun_all(patrick) should be 4 <->", pun_all(patrick))
# they're more similar, punctuation-wise than scrabble-wise


#
# the two works of yours and two of another author's ("theirs")
#     these can - and should - be large
#

yours1 = """  python is widely used for data science, web development,
and automation due to its simplicity and powerful libraries """

yours2 = """  python's flexibility allows developers to build scalable
applications, automate tasks, and work with machine learning models """

theirs1 = """  python is an interpreted language, making debugging easier
but sometimes slower than compiled languages."""

theirs2 = """  pythonâ€™s extensive libraries support networking,
file handling, and automation, making it highly versatile """


len(theirs2)


#
# here, run your punctuation-comparisons (absolute counts)
print("pun_all(yours1) [mohammed]:", pun_all(yours1))
print("pun_all(yours2) [ist341_participant_5]:", pun_all(yours2))
print("pun_all(theirs1) [other author]:", pun_all(theirs1))
print("pun_all(theirs2) [other author]:", pun_all(theirs2))





#
# here, run your punctuation-comparisons (relative, per-character counts)
print("yours1 punctuation density [mohammed]:", pun_all(yours1) / len(yours1))
print("yours2 punctuation density [ist341_participant_5]:", pun_all(yours2) / len(yours2))
print("theirs1 punctuation density [other author]:", pun_all(theirs1) / len(theirs1))
print("theirs2 punctuation density [other author]:", pun_all(theirs2) / len(theirs2))




#
# example while loop: the "guessing game"
#

from random import *

def guess( hidden ):
    """
        have the computer guess numbers until it gets the "hidden" value
        return the number of guesses
    """
    guess = hidden - 1      # start with a wrong guess + don't count it as a guess
    number_of_guesses = 0   # start with no guesses made so far...

    while guess != hidden:
        #print("i guess", guess)  # comment this out - avoid printing when analyzing!
        guess = choice( range(0,100) )  # 0 to 99, inclusive
        number_of_guesses += 1

    return number_of_guesses

# test our function!
guess(42)


# let's run 10 number-guessing experiments!

l = [ guess(42) for i in range(10) ]
print(l)

# 10 experiments: let's see them!!


# let's see what the average results were
print("len(l) is", len(l))
ave = sum(l)/len(l)
print("average is", ave )

# try min and max, count of 42's, count of 92's, etc.


#
# let's try again... with the dice-rolling experiment
#

from random import choice

def count_doubles( num_rolls ):
    """
        have the computer roll two six-sided dice, counting the # of doubles
        (same value on both dice)
        then, return the number of doubles...
    """
    numdoubles = 0       # start with no doubles so far...

    for i in range(0,num_rolls):   # roll repeatedly: i keeps track
        d1 = choice( [1,2,3,4,5,6] )  # 0 to 6, inclusive
        d2 = choice( range(1,7) )     # 0 to 6, inclusive
        if d1 == d2:
            numdoubles += 1
            you = "ðŸ™‚"
        else:
            you = " "

        #print("run", i, "roll:", d1, d2, you, flush=true)
        #time.sleep(.01)

    return numdoubles

# test our function!
count_doubles(300)


l = [ count_doubles(300) for i in range(1000) ]
print("doubles-counting: l[0:5] are", l[0:5])
print("doubles-counting: l[-5:] are", l[-5:])
#
# let's see what the average results were
print("len(l) is", len(l))
ave = sum(l)/len(l)
print("average is", ave )
print("max of l: ", max(l))
print("min of l: ", min(l))

count=0
for i in l:
  if i==92:
    count+=1
print("number of 92: ", count)

# try min and max, count of 42's, count of 92's, etc.



# let's try our birthday-room experiment:

from random import choice

def birthday_room( days_in_year = 365 ):    # note: default input!
    """
        run the birthday room experiment once!
    """
    b = []
    next_bday = choice( range(0,days_in_year) )

    while next_bday not in b:
        b += [ next_bday ]
        next_bday = choice( range(0,days_in_year) )

    b += [ next_bday ]
    return b



# test our three-curtain-game, many times:
result = birthday_room()   # use the default value
print(len(result))


sum([ 2, 3, 4 ]) / len([2,3,4])


lc = [ len(birthday_room()) for i in range(100) ]
print(lc)
sum(lc) / len(lc)



l = [ len(birthday_room()) for i in range(100000) ]
print("birthday room: l[0:5] are", l[0:5])
print("birthday room: l[-5:] are", l[-5:])
#
# let's see what the average results were
print("len(l) is", len(l))
ave = sum(l)/len(l)
print("average is", ave )
print("max is", max(l))
# try min and max, count of 42's, count of 92's, etc.


[ x**2 for x in [3,5,7] ]


s = "ash"
s[2]


[  s[-1] for s in ["ash", "ist341_participant_8", "mohammed"] ]


max(l)


#
# example monte carlo simulation: the monte-carlo monte hall paradox
#

from random import choice

def count_wins( n, original_choice, stay_or_switch ):
    """
        run the monte hall paradox n times, with
        original_choice, which can be 1, 2, or 3 and
        stay_or_switch, which can be "stay" or "switch"
        count the number of wins and return that number.
    """
    numwins = 0       # start with no wins so far...

    for i in range(1,n+1):      # run repeatedly: i keeps track
        win_curtain = choice([1,2,3])   # the curtain with the grand prize
        original_choice = original_choice      # just a reminder that we have this variable
        stay_or_switch = stay_or_switch        # a reminder that we have this, too

        result = ""
        if original_choice == win_curtain and stay_or_switch == "stay": result = " win!!!"
        elif original_choice == win_curtain and stay_or_switch == "switch": result = "lose..."
        elif original_choice != win_curtain and stay_or_switch == "stay": result = "lose..."
        elif original_choice != win_curtain and stay_or_switch == "switch": result = " win!!!"

        #print("run", i, "you", result, flush=true)
        #time.sleep(.025)

        if result == " win!!!":
            numwins += 1


    return numwins

# test our three-curtain-game, many times:
count_wins(300, 1, "stay")



l = [ count_wins(300,1,"stay") for i in range(1000) ]
print("curtain game: l[0:5] are", l[0:5])
print("curtain game: l[-5:] are", l[-5:])
#
# let's see what the average results were
print("len(l) is", len(l))
ave = sum(l)/len(l)
print("average is", ave )

# try min and max, count of 42's, count of 92's, etc.


#
# first, the random-walking code:
#

import random

def rs():
    """one random step"""
    return random.choice([-1, 1])

def rwalk(radius):
    """random walk between -radius and +radius  (starting at 0 by default)"""
    totalsteps = 0          # starting value of totalsteps (_not_ final value!)
    start = 0               # start location (_not_ the total # of steps)

    while true:             # run "forever" (really, until a return or break)
        if start == -radius or start == radius:
            return totalsteps # phew!  return totalsteps (stops the while loop)

        start = start + rs()
        totalsteps += 1     # addn totalsteps 1 (for all who miss hmmm :-)

        #print("at:", start, flush=true) # to see what's happening / debugging
        # ascii = "|" + "_"*(start- -radius) + "s" + "_"*(radius-start) + "|"
        # print(ascii, flush=true) # to see what's happening / debugging

    # it can never get here!

# let's test it:
rwalk(5)   # walk randomly within our radius... until we hit a wall!



# analyze!
# create list comprehensions that run rwalk(5) for 1000 times

# here is a starting example:
l = [ rwalk(5) for i in range(1000) ]

# then, find the average of those 1000 experiments for rwalk(5)
average = sum(l)/len(l)
print("the average for radius==5 (for 1000 trials) was", average)


# next, try it for more values...
# then, you'll create a hypothesis about what's happening!




# here is a starting example:
l = [ rwalk(6) for i in range(1000) ]

# then, find the average of those 1000 experiments for rwalk(5)
average = sum(l)/len(l)
print("the average for radius==6 (for 1000 trials) was", average)





# here is a starting example:
l = [ rwalk(7) for i in range(1000) ]

# then, find the average of those 1000 experiments for rwalk(5)
average = sum(l)/len(l)
print("the average for radius==7 (for 1000 trials) was", average)



# here is a starting example:
l = [ rwalk(8) for i in range(1000) ]

# then, find the average of those 1000 experiments for rwalk(5)
average = sum(l)/len(l)
print("the average for radius==8 (for 1000 trials) was", average)



# here is a starting example:
l = [ rwalk(9) for i in range(1000) ]

# then, find the average of those 1000 experiments for rwalk(5)
average = sum(l)/len(l)
print("the average for radius==9 (for 1000 trials) was", average)



# here is a starting example:
l = [ rwalk(10) for i in range(1000) ]

# then, find the average of those 1000 experiments for rwalk(5)
average = sum(l)/len(l)
print("the average for radius==10 (for 1000 trials) was", average)



#
# see if we have the requests library...
#

import requests


#
# let's try it on a simple webpage
#

#
# we assign the url and obtain the api-call result into result
#    note that result will be an object that contains many fields (not a simple string)
#

url = "https://www.cs.hmc.edu/~dodds/demo.html"
#url = "https://www.cgu.edu/"
url = "https://www.facebook.com/terms?section_id=section_3"
result = requests.get(url)

# if it succeeded, you should see <response [200]>
# see the list of http reponse codes for the full set!


#
# when exploring, you'll often obtain an unfamiliar object.
# here, we'll ask what type it is
type(result)


# we can print all of the data members in an object with dir
# since dir returns a list, we will grab that list and loop over it:
all_fields = dir(result)

for field in all_fields:
    if "_" not in field:
        print(field)


#
# let's try printing a few of those fields (data members):
print(f"result.url         is {result.url}")  # the original url
print(f"result.raw         is {result.raw}")  # another object!
print(f"result.encoding    is {result.encoding}")  # utf-8 is very common
print(f"result.status_code is {result.status_code}")  # 200 is success!


# http://api.open-notify.org/iss-now.json



# in this case, the result is a text file (html) let's see it!
contents = result.text
print(contents)


# yay!
# this shows that you are able to "scrape" an arbitrary html page...

# now, we're off to more _structured_ data-gathering...


#
# we assign the url and obtain the api-call result into result
#    note that result will be an object that contains many fields (not a simple string)
#

import requests

url = "http://api.open-notify.org/iss-now.json"   # this is sometimes called an "endpoint" ...
result = requests.get(url)

# if it succeeds, you should see <response [200]>


#
# let's try printing those shorter fields from before:
print(f"result.url         is {result.url}")  # the original url
print(f"result.raw         is {result.raw}")  # another object!
print(f"result.encoding    is {result.encoding}")  # utf-8 is very common
print(f"result.status_code is {result.status_code}")  # 200 is success!


#
# in this case, we know the result is a json file, and we can obtain it that way:
json_contents = result.json()
print(json_contents)

# remember:  json_contents will be a _dictionary_


#
# let's see how dictionaries work:

json_contents['message']

# thought experiment:  could we access the other components? what _types_ are they?!!


# json is a javascript dictionary format -- almost the same as a python dictionary:
data = { 'key':'value',  'fave':42,  'list':[5,6,7,{'mascot':'aliiien'}] }
print(data)


#
# here, we will obtain plain-text results from a request
url = "https://www.cs.hmc.edu/~dodds/demo.html"  # try it + source
# url = "https://www.scrippscollege.edu/"          # another possible site...
# url = "https://www.pitzer.edu/"                  # another possible site...
# url = "https://www.cmc.edu/"                     # and another!
# url = "https://www.cgu.edu/"                       # yay cgu!
result = requests.get(url)
print(f"result is {result}")        # question: is the result a "200" response?!


#
# we assign the url and use requests.get to obtain the result into result_astro
#
#    remember, result_astro will be an object that contains many fields (not a simple string)
#

import requests

url = "http://api.open-notify.org/astros.json"   # this is sometimes called an "endpoint" ...
result_astro = requests.get(url)
result_astro

# if it succeeded, you should see <response [200]>


# if the request succeeded, we know the result is a json file, and we can obtain it that way.
# let's call our dictionary something more specific:

astronauts = result_astro.json()
print(astronauts)

d = astronauts     # shorter to type

# remember:  astronauts will be a _dictionary_

note = """ here's yesterday evening's result - it _should_ be the same this morning!

{"people": [{"craft": "iss", "name": "oleg kononenko"}, {"craft": "iss", "name": "nikolai chub"},
{"craft": "iss", "name": "tracy caldwell dyson"}, {"craft": "iss", "name": "matthew dominick"},
{"craft": "iss", "name": "michael barratt"}, {"craft": "iss", "name": "jeanette epps"},
{"craft": "iss", "name": "alexander grebenkin"}, {"craft": "iss", "name": "butch wilmore"},
{"craft": "iss", "name": "sunita williams"}, {"craft": "tiangong", "name": "li guangsu"},
{"craft": "tiangong", "name": "li cong"}, {"craft": "tiangong", "name": "ye guangfu"}],
"number": 12, "message": "success"}
"""


# use this cell for the in-class challenges, which will be
#    (1) to extract the value 12 from the dictionary d
num_astronauts = d["number"]
print("total astronauts:", num_astronauts)
#    (2) to extract the name "sunita williams" from the dictionary d
for person in d["people"]:
    if person["name"] == "sunita williams":
        print("found:", person["name"])


# use this cell - based on the example above - to share your solutions to the astronaut challenges...
for person in d["people"]: #find "jeanette epps"
    if person["name"] == "jeanette epps":
        print("found:", person["name"])

for person in d["people"]: #find ok using "nikolai chub"
    if person["name"] == "nikolai chub":
        print("status:", "ok")



#
# use this cell for your api call - and data-extraction
import requests

url = "https://api.open-meteo.com/v1/forecast?latitude=24.7136&longitude=46.6753&current_weather=true" # api for riyadh, saudi arabia

result_weather = requests.get(url) #api request


print(f"api response: {result_weather.status_code}")

weather_data = result_weather.json() #extract and print the json data
print(weather_data)

temperature = weather_data["current_weather"]["temperature"]
wind_speed = weather_data["current_weather"]["windspeed"]


print(f"current temperature in riyadh: {temperature}Â°c")
print(f"wind speed in riyadh: {wind_speed} km/h") #print extracted values



#
# use this cell for your webscraping call - optional data-extraction
import requests

url = "https://en.wikipedia.org/wiki/main_page" #webpage url (wikipedia main page)
result_html = requests.get(url) #to get the html content
print(f"webpage response: {result_html.status_code}") #print the status to ensure success

html_content = result_html.text[:500]  # extracting first 500 characters
print(html_content)




#
# throwing a single dart
#

import random

def dart():
    """throws one dart between (-1,-1) and (1,1).
       returns true if it lands in the unit circle; otherwise, false.
    """
    x = random.uniform(-1, 1)
    y = random.uniform(-1, 1)
    #print("(x,y) are", (x,y))   # you'll want to comment this out...

    if x**2 + y**2 < 1:
        return true  # hit (within the unit circle)
    else:
        return false # missed (landed in one of the corners)

# try it!
result = dart()
print("result is", result)




# try it ten times in a loop:
hitnumber=0
totalthrows=0
for i in range(10):
    result = dart()
    totalthrows+=1
    if result == true:
        hitnumber+=1
        print("   hit the circle!")
    else:
        print("   missed...")
pi = 4*hitnumber/totalthrows
print("the number of hits: ", hitnumber)
print("the number of throws: ", totalthrows)
print("the pi is: ", pi )

# try adding up the number of hits, the number of total throws
# remember that pi is approximately 4*hits/throws   (cool!)



#
# write forpi(n)
#

#
# for the full explanation, see https://www.cs.hmc.edu/twiki/bin/view/cs5fall2021/pifrompiegold
#


# this is only a starting point
def forpi(n):
    """throws n darts, estimating pi."""
    pi = 42     # a suitably poor initial estimate
    throws = 0  # no throws yet
    hits = 0    # no "hits" yet  (hits ~ in the circle)
    for i in range(n):
        throws+=1
        if dart():
            hits+=1
        pi= 4*hits/throws
        print ('this is hit number: ', hits, 'out of ', throws,'  throws, so pi is :', pi)

# try it!
forpi(10)



#
# write whilepi(n)
#

#
# for the full explanation, see https://www.cs.hmc.edu/twiki/bin/view/cs5fall2021/pifrompiegold
#


# this is only a starting point
import math
def whilepi(error):
    """throws n darts, estimating pi."""
    pi = 42     # a suitably poor initial estimate
    throws = 0  # no throws yet
    hits = 0    # no "hits" yet  (hits ~ in the circle)
    while abs ((math.pi) - pi) >= error:
        throws+=1
        if dart():
            hits+=1
        pi= 4*hits/throws
        print ('this is hit number: ', hits, 'out of ', throws,'  throws, so pi is :', pi)

    return throws


# try it!
whilepi(.01)


#
# your additional punctuation-style explorations (optional!)
#





